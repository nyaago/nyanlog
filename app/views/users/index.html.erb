<h1><%= human_action_name(:users, :index)%></h1>
<% unless flash[:notice].blank? %>
  <% unless flash[:notice].blank? %>
  <p id="notice"><%= flash[:notice] %></p>
  <% end %>
  <% unless flash[:warning].blank? %>
  <p id="notice"><%= flash[:warning] %></p>
  <% end %>
<% end %>
<table>
  <tr>
    <th><%= User.human_attribute_name(:login) %></th>
    <% if @site.nil? %>
    <th><%= User.human_attribute_name(:site_id) %></th>
    <th><%= User.human_attribute_name(:is_admin) %></th>
    <% end %>
    <th><%= User.human_attribute_name(:is_site_admin) %></th>
    <th><%= User.human_attribute_name(:is_editor) %></th>
    <th></th>
    <th></th>
  </tr>

<% @users.each do |user| %>
  <tr>
    <td><%= user.login %></td>
    <% if @site.nil? %>
    <td>
      <% if user.site %><%= user.site.name %><% end %>
    </td>
    <td>
      <% if user.is_admin %>Yes<% end %>
    </td>
    <% end %>
    <td>
      <% if user.is_site_admin %>Yes<% end %>
    </td>
    <td>
      <% if user.is_editor %>Yes<% end %>
    </td>
    <td>
    <%= link_to human_action_name(nil, :edit), 
    edit_user_path(user, url_options_from_params) %>
    </td>
    <td>
    <%= link_to human_action_name(nil, :destroy), 
    user_path(user, url_options_from_params), 
    :confirm =>  message(:users, :destroy_confirmation), 
    :method => :delete %>
    </td>
  </tr>
<% end %>
</table>

<br />

<%= will_paginate @users,:previous_label => '<=', :next_label => '=>'  %>

<div class="actions">
<%= link_to human_action_name(:users, :new), new_user_path %>
</div>